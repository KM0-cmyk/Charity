<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projects | Ceylon International Trust Fund</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f4f4f4;
    }

    @keyframes slideDown {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .animate-slideDown {
      animation: slideDown 0.6s ease-out;
    }

    .project-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .project-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }

    .btn-3d {
      background-color: #2563eb;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 600;
      box-shadow: 0 8px 15px rgba(37, 99, 235, 0.4);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .btn-3d:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 25px rgba(37, 99, 235, 0.6);
    }
    .whatsapp-button {
      position: fixed;
      bottom: 25px;
      right: 25px;
      background-color: #25d366;
      border-radius: 50%;
      padding: 14px;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: background-color 0.3s ease;
    }

    .whatsapp-button:hover {
      background-color: #1ebe57;
      text-decoration: none;
    }
    /* WhatsApp button */
    .whatsapp-button {
      position: fixed;
      bottom: 25px;
      right: 25px;
      z-index: 1000;
      /* your styles */
    }

    /* Donate Now button */
    .donate-floating {
      position: fixed;
      bottom: 90px;  /* moved 65px up from whatsapp */
      right: 25px;
      z-index: 1000;
      /* your styles */
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background: white;
      max-width: 90%;
      max-height: 90%;
      overflow-y: auto;
      border-radius: 1rem;
      padding: 2rem;
      position: relative;
    }
    .modal-content img {
      max-width: 100%;
      margin-bottom: 1rem;
      border-radius: 0.5rem;
    }
    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.5rem;
      color: #333;
      cursor: pointer;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- HEADER with responsive nav and mobile toggle -->
  <header class="sticky top-0 z-50 backdrop-blur-lg bg-gray-800/80 shadow-md animate-slideDown">
    <!-- Top Bar -->
    <div class="bg-yellow-400 py-2 text-gray-900 text-sm px-4 flex flex-col sm:flex-row justify-between items-center">
      <div class="mb-2 sm:mb-0">
        ðŸ“ž <a href="tel:+94000000000" class="hover:underline rounded-md px-2 py-1">+94 00 000 0000</a> |
        ðŸ“§ <a href="mailto:info@citf.org" class="hover:underline rounded-md px-2 py-1">info@citf.org</a>
      </div>
    </div>

    <!-- Main Navigation -->
    <div class="container mx-auto px-4 py-4 flex justify-between items-center text-white">
      <!-- Logo -->
      <div class="flex items-center">
        <img src="https://placehold.co/60x60/374151/FFFFFF?final.jpg" alt="Logo" class="mr-3 rounded-full shadow-lg" />
        <div>
          <h1 class="text-xl font-bold">Ceylon International Trust Fund</h1>
          <p class="text-yellow-400 text-sm">Improving life chances</p>
        </div>
      </div>

      <!-- Hamburger Button (Mobile) -->
      <button id="menuBtn" class="lg:hidden text-white text-3xl focus:outline-none">
        &#9776;
      </button>

      <!-- Nav Menu (Desktop) -->
      <ul id="navMenu" class="hidden lg:flex flex-col lg:flex-row space-y-2 lg:space-y-0 lg:space-x-6 text-lg items-center">
        <li><a href="index.html" class="hover:text-yellow-400 px-3 py-2 rounded-md">Home</a></li>
        <li><a href="about.html" class="hover:text-yellow-400 px-3 py-2 rounded-md">About</a></li>
        <li><a href="projects.html" class="text-yellow-400 font-semibold px-3 py-2 rounded-md">Projects</a></li>
        <li><a href="contact.html" class="hover:text-yellow-400 px-3 py-2 rounded-md">Contact</a></li>
        <li><button class="btn-3d mt-2 lg:mt-0">Donate Now</button></li>
      </ul>
    </div>

    <!-- Mobile Nav Dropdown -->
    <div id="mobileMenu" class="lg:hidden hidden bg-gray-900 text-white px-4 py-4 space-y-2">
      <a href="index.html" class="block px-3 py-2 rounded-md hover:bg-gray-700">Home</a>
      <a href="about.html" class="block px-3 py-2 rounded-md hover:bg-gray-700">About</a>
      <a href="projects.html" class="block px-3 py-2 rounded-md bg-yellow-400 text-gray-900 rounded-md font-semibold">Projects</a>
      <a href="contact.html" class="block px-3 py-2 rounded-md hover:bg-gray-700">Contact</a>
      <button class="btn-3d w-full text-center">Donate Now</button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-6xl mx-auto py-16 px-4 text-center">
    <h2 class="text-4xl font-bold mb-6">Our Projects</h2>
    <p class="text-gray-600 mb-12 text-lg max-w-2xl mx-auto">
      Discover the impactful initiatives we're leading across Sri Lanka to uplift communities through education, healthcare, nutrition, and economic support.
    </p>

    <div id="projectList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Dynamic project cards will load here -->
    </div>
  </main>
  <!-- Modal -->
  <div id="projectModal" class="modal hidden">
    <div class="modal-content relative">
      <span class="close-btn" id="closeModal">&times;</span>
      <h3 id="modalTitle" class="text-2xl font-bold mb-4"></h3>
      <div id="modalImages" class="mb-4"></div>
      <p id="modalDescription" class="text-gray-700"></p>
    </div>
  </div>

  <!-- WhatsApp Floating Button -->
  <a href="https://wa.me/94740662500" target="_blank"
     class="whatsapp-button" aria-label="Chat on WhatsApp" rel="noopener noreferrer">
    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
      <path d="M20.52 3.48A11.837 11.837 0 0012 0C5.37 0 0 5.37 0 12a11.9 11.9 0 001.62 6L0 24l6-1.62A11.87 11.87 0 0012 24c6.63 0 12-5.37 12-12a11.8 11.8 0 00-3.48-8.52zm-8.58 17.28c-1.8 0-3.51-.48-5.04-1.38l-.36-.21-3.03.81.81-3.03-.24-.36a8.97 8.97 0 01-1.41-5.04c0-4.98 4.05-9.03 9.03-9.03 2.4 0 4.68.96 6.39 2.67a8.995 8.995 0 012.7 6.36c0 4.98-4.05 9.03-9.03 9.03z"/>
      <path d="M17.52 14.55l-2.4-.69a.93.93 0 00-1.08.51l-.54 1.08a9.44 9.44 0 01-4.32-4.32l1.08-.54a.93.93 0 00.51-1.08l-.69-2.4a.92.92 0 00-.9-.63H6a.93.93 0 00-.93.93c0 5.7 4.65 10.35 10.35 10.35a.93.93 0 00.93-.93v-2.55a.92.92 0 00-.63-.9z"/>
    </svg>
  </a>
  <a href="donate.html" class="btn-3d donate-floating" aria-label="Donate Now">
    Donate Now
  </a>
  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-12 mt-20">
    <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-sm">
      <div>
        <h3 class="font-semibold text-lg mb-2">LOCATION</h3>
        <p class="text-gray-400">
          Ceylon International Trust Fund<br />
          XXXXXX<br />
          00, XXXX
        </p>
      </div>
      <div>
        <h3 class="font-semibold text-lg mb-2">CONTACT</h3>
        <p class="text-gray-400">
          ðŸ“ž +94 00 000 0000<br />
          ðŸ“§ info@citf.org<br />
          Charity No: 000000x
        </p>
      </div>
      <div>
        <h3 class="font-semibold text-lg mb-2">FOLLOW US</h3>
        <div class="flex space-x-4">
          <a href="#" class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white">f</a>
          <a href="#" class="w-8 h-8 bg-sky-400 rounded-full flex items-center justify-center text-white">t</a>
          <a href="#" class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white">G+</a>
          <a href="#" class="w-8 h-8 bg-blue-800 rounded-full flex items-center justify-center text-white">in</a>
        </div>
      </div>
    </div>
    <div class="text-center text-gray-400 text-xs mt-8 border-t border-gray-700 pt-8">
      Â© 2025 Ceylon International Trust Fund. All rights reserved.
    </div>
  </footer>

 <script>
  const list = document.getElementById('projectList');
  const modal = document.getElementById('projectModal');
  const closeModal = document.getElementById('closeModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalImages = document.getElementById('modalImages');
  const modalDescription = document.getElementById('modalDescription');

  function renderProjects(projects) {
    list.innerHTML = '';
    projects.forEach(proj => {
      const coverImage = proj.imageUrls ? proj.imageUrls[0] : proj.imageUrl;
      const card = document.createElement('div');
      card.className = 'bg-white rounded-lg overflow-hidden shadow project-card cursor-pointer';
      card.innerHTML = `
        <img src="${coverImage}" alt="Project Image" class="w-full h-48 object-cover" />
        <div class="p-5">
          <h3 class="text-xl font-semibold mb-2">${proj.title}</h3>
          <p class="text-sm text-gray-600">${proj.description.substring(0, 100)}...</p>
        </div>
      `;
      card.addEventListener('click', () => openModal(proj));
      list.appendChild(card);
    });
  }

  function openModal(proj) {
    // Clear previous content
    modalTitle.textContent = '';
    modalDescription.textContent = '';
    modalImages.innerHTML = '';
    modal.classList.remove('hidden');

    // Step 1: Show title
    setTimeout(() => {
      modalTitle.textContent = proj.title;
    }, 100); // slight delay for animation feel

    // Step 2: Show description
    setTimeout(() => {
      modalDescription.textContent = proj.description;
    }, 400); // show after 300ms

    // Step 3: Show images
    setTimeout(() => {
      const imagesHTML = (proj.imageUrls || [proj.imageUrl])
        .map(
          (url) => `<img src="${url}" alt="" class="w-full sm:w-3/4 md:w-2/3 lg:w-1/2 mx-auto mb-4 rounded-lg shadow" />`
        )
        .join('');
      modalImages.innerHTML = imagesHTML;
    }, 700); // show after 700ms
  }

  closeModal.addEventListener('click', () => {
    modal.classList.add('hidden');
  });

  window.addEventListener('DOMContentLoaded', async () => {
    try {
      const res = await fetch('https://charity-xsub.onrender.com//api/projects');
      let projects = await res.json();
      projects = projects.reverse(); // Show latest projects first
      renderProjects(projects);
    } catch (error) {
      list.innerHTML = '<p class="text-red-600">Unable to load projects.</p>';
      console.error(error);
    }
  });

  // Mobile menu toggle
  const menuBtn = document.getElementById('menuBtn');
  const mobileMenu = document.getElementById('mobileMenu');

  menuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

</script>

</body>
</html>
